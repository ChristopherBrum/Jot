(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5b97","chunk-7f29"],{"+WSI":function(t,e,n){var r=n("/r8T");t.exports=function(t,e){return new(r(t))(e)}},"/r8T":function(t,e,n){var r=n("ekG2"),o=n("Trx6"),i=n("zBWt")("species");t.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=void 0),r(e)&&null===(e=e[i])&&(e=void 0)),void 0===e?Array:e}},"1GvH":function(t,e,n){n("5w6Y"),t.exports=n("VSTI").Object.keys},"1i29":function(t,e,n){"use strict";var r=n("USwo"),o=n("FgkJ"),i=n("nAx8"),a=n("wlNh");t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,s,u=arguments[1];return o(this),(e=void 0!==u)&&o(u),null==t?new this:(n=[],e?(r=0,s=i(u,arguments[2],2),a(t,!1,(function(t){n.push(s(t,r++))}))):a(t,!1,n.push,n),new this(n))}})}},"5w6Y":function(t,e,n){var r=n("CYMq"),o=n("mHY4");n("czaS")("keys",(function(){return function(t){return o(r(t))}}))},AjXP:function(t,e,n){var r=n("wlNh");t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},FyfS:function(t,e,n){t.exports={default:n("fUKC"),__esModule:!0}},GQeE:function(t,e,n){t.exports={default:n("1GvH"),__esModule:!0}},"GxU+":function(t,e,n){"use strict";var r=n("fn8H");n.n(r).a},Huux:function(t,e,n){n("PJ8w")("Set")},Iab2:function(t,e,n){(function(n){var r,o,i;o=[],void 0===(i="function"==typeof(r=function(){"use strict";function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){s(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(t,n,a){var s=i.URL||i.webkitURL,u=document.createElement("a");n=n||t.name||"download",u.download=n,u.rel="noopener","string"==typeof t?(u.href=t,u.origin===location.origin?o(u):r(u.href)?e(t,n,a):o(u,u.target="_blank")):(u.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(u.href)}),4e4),setTimeout((function(){o(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,i){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,i),n);else if(r(t))e(t,n,i);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){o(a)}))}}:function(t,n,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var s="application/octet-stream"===t.type,u=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&u||a)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},l.readAsDataURL(t)}else{var f=i.URL||i.webkitURL,d=f.createObjectURL(t);o?o.location=d:location.href=d,o=null,setTimeout((function(){f.revokeObjectURL(d)}),4e4)}});i.saveAs=s.saveAs=s,t.exports=s})?r.apply(e,o):r)||(t.exports=i)}).call(this,n("yLpj"))},JAUQ:function(t,e,n){var r=n("ekG2");t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},KtlF:function(t,e,n){var r=n("aqg2"),o=n("AjXP");t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return o(this)}}},LYKQ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(n("14Xm")),o=c(n("D3Ub")),i=c(n("QbLZ")),a=n("L2JU"),s=c(n("t3Un")),u=c(n("VqTb"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"Dashboard",components:{ListDocuments2:u.default},data:function(){return{statusInfo:{listeners:{}}}},computed:(0,i.default)({},(0,a.mapGetters)(["email","roles"])),mounted:function(){this.update()},methods:{update:function(){var t=this;return(0,o.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.default)({url:"/status/"});case 2:t.statusInfo=e.sent.data;case 3:case"end":return e.stop()}}),e,t)})))()}}}},Li4W:function(t,e,n){n("1i29")("Set")},"M+fh":function(t,e,n){"use strict";var r=n("7whZ"),o=n("USwo"),i=n("40oJ"),a=n("S4vA"),s=n("BRsN"),u=n("iZ5/"),c=n("wlNh"),l=n("ukM9"),f=n("ekG2"),d=n("kvAF"),p=n("GhSp").f,v=n("rNHk")(0),h=n("C61u");t.exports=function(t,e,n,m,g,b){var y=r[t],_=y,w=g?"set":"add",x=_&&_.prototype,S={};return h&&"function"==typeof _&&(b||x.forEach&&!a((function(){(new _).entries().next()})))?(_=e((function(e,n){l(e,_,t,"_c"),e._c=new y,null!=n&&c(n,g,e[w],e)})),v("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(t){var e="add"==t||"set"==t;!(t in x)||b&&"clear"==t||s(_.prototype,t,(function(n,r){if(l(this,_,t),!e&&b&&!f(n))return"get"==t&&void 0;var o=this._c[t](0===n?0:n,r);return e?this:o}))})),b||p(_.prototype,"size",{get:function(){return this._c.size}})):(_=m.getConstructor(e,t,g,w),u(_.prototype,n),i.NEED=!0),d(_,t),S[t]=_,o(o.G+o.W+o.F,S),b||m.setStrong(_,t,g),_}},N4c9:function(t,e,n){n("wYM1");var r=n("VSTI").Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},PJ8w:function(t,e,n){"use strict";var r=n("USwo");t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},PfQu:function(t,e,n){"use strict";var r=n("rdj4"),o=n("JAUQ");t.exports=n("M+fh")("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(o(this,"Set"),t=0===t?0:t,t)}},r)},Qxpe:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dashboard-container"},[n("div",{staticClass:"dashboard-text"},[t._v("\n    Welcome: "+t._s(t.email)+"\n  ")]),t._v(" "),n("div",{staticClass:"dashboard-text"},[t._v("\n    roles: "),t._l(t.roles,(function(e){return n("span",{key:e},[t._v(t._s(e))])}))],2),t._v(" "),n("div",{staticClass:"dashboard-text"},[t._v("\n    listeners: "+t._s(t.statusInfo.listeners.length)+" active\n  ")]),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"dashboard-text"},[t._v("\n    uptime: "+t._s(t.statusInfo.uptime)+"\n  ")]),t._v(" "),n("div",{staticClass:"dashboard-text"},[t._v("\n    Node.js version: "+t._s(t.statusInfo.nodeVersion)+"\n  ")]),t._v(" "),n("div",{staticClass:"dashboard-text"},[t._v("\n    environment: "+t._s(t.statusInfo.env)+"\n    "),n("router-link",{attrs:{id:"settings-link",to:"/edit/settings/"+t.statusInfo.env}},[t._v("\n      (edit settings)\n    ")])],1),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("h3",[t._v("Recent API Requests")]),t._v(" "),n("ListDocuments2",{attrs:{"show-paginate-on-bottom":!1,"show-add-button":!1,filter:{limit:5,query:{method:{$ne:"OPTIONS"}}},columns:["method","url","user","res.message","res.statusCode"],"collection-name":"requestlog"}})],1)},o=[]},RYnq:function(t,e,n){"use strict";var r=n("lcJ3");n.n(r).a},SEkw:function(t,e,n){t.exports={default:n("N4c9"),__esModule:!0}},VqTb:function(t,e,n){"use strict";n.r(e);var r=n("gWtp"),o=n("sw1Y");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("RYnq");var a=n("KHd+"),s=Object(a.a)(o.default,r.a,r.b,!1,null,"568a7a58",null);s.options.__file="ListDocuments2.vue",e.default=s.exports},YEIV:function(t,e,n){"use strict";e.__esModule=!0;var r,o=n("SEkw"),i=(r=o)&&r.__esModule?r:{default:r};e.default=function(t,e,n){return e in t?(0,i.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},boci:function(t,e,n){var r,o,i;!function(n,a){"use strict";"object"==typeof t.exports?t.exports=a():(o=[],void 0===(i="function"==typeof(r=a)?r.apply(e,o):r)||(t.exports=i))}(0,(function(){"use strict";var t=Object.prototype.toString;function e(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}function n(t){if(!t)return!0;if(o(t)&&0===t.length)return!0;if("string"!=typeof t){for(var n in t)if(e(t,n))return!1;return!0}return!1}function r(e){return t.call(e)}var o=Array.isArray||function(e){return"[object Array]"===t.call(e)};function i(t){var e=parseInt(t);return e.toString()===t?e:t}function a(t){var a,s,u=function(t){return Object.keys(u).reduce((function(e,n){return"create"===n||"function"==typeof u[n]&&(e[n]=u[n].bind(u,t)),e}),{})};function c(t,e){if(a(t,e))return t[e]}function l(t,e,n,r){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if("string"==typeof e)return l(t,e.split(".").map(i),n,r);var o=e[0],a=s(t,o);return 1===e.length?(void 0!==a&&r||(t[o]=n),a):(void 0===a&&("number"==typeof e[1]?t[o]=[]:t[o]={}),l(t[o],e.slice(1),n,r))}return a=(t=t||{}).includeInheritedProps?function(){return!0}:function(t,n){return"number"==typeof n&&Array.isArray(t)||e(t,n)},s=t.includeInheritedProps?function(t,e){"string"!=typeof e&&"number"!=typeof e&&(e=String(e));var n=c(t,e);if("__proto__"===e||"prototype"===e||"constructor"===e&&"function"==typeof n)throw new Error("For security reasons, object's magic properties cannot be set");return n}:function(t,e){return c(t,e)},u.has=function(n,r){if("number"==typeof r?r=[r]:"string"==typeof r&&(r=r.split(".")),!r||0===r.length)return!!n;for(var a=0;a<r.length;a++){var s=i(r[a]);if(!("number"==typeof s&&o(n)&&s<n.length||(t.includeInheritedProps?s in Object(n):e(n,s))))return!1;n=n[s]}return!0},u.ensureExists=function(t,e,n){return l(t,e,n,!0)},u.set=function(t,e,n,r){return l(t,e,n,r)},u.insert=function(t,e,n,r){var i=u.get(t,e);r=~~r,o(i)||(i=[],u.set(t,e,i)),i.splice(r,0,n)},u.empty=function(t,e){var i,s;if(!n(e)&&(null!=t&&(i=u.get(t,e)))){if("string"==typeof i)return u.set(t,e,"");if(function(t){return"boolean"==typeof t||"[object Boolean]"===r(t)}(i))return u.set(t,e,!1);if("number"==typeof i)return u.set(t,e,0);if(o(i))i.length=0;else{if(!function(t){return"object"==typeof t&&"[object Object]"===r(t)}(i))return u.set(t,e,null);for(s in i)a(i,s)&&delete i[s]}}},u.push=function(t,e){var n=u.get(t,e);o(n)||(n=[],u.set(t,e,n)),n.push.apply(n,Array.prototype.slice.call(arguments,2))},u.coalesce=function(t,e,n){for(var r,o=0,i=e.length;o<i;o++)if(void 0!==(r=u.get(t,e[o])))return r;return n},u.get=function(t,e,n){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if(null==t)return n;if("string"==typeof e)return u.get(t,e.split("."),n);var r=i(e[0]),o=s(t,r);return void 0===o?n:1===e.length?o:u.get(t[r],e.slice(1),n)},u.del=function(t,e){if("number"==typeof e&&(e=[e]),null==t)return t;if(n(e))return t;if("string"==typeof e)return u.del(t,e.split("."));var r=i(e[0]);return s(t,r),a(t,r)?1!==e.length?u.del(t[r],e.slice(1)):(o(t)?t.splice(r,1):delete t[r],t):t},u}var s=a();return s.create=a,s.withInheritedProps=a({includeInheritedProps:!0}),s}))},czaS:function(t,e,n){var r=n("USwo"),o=n("VSTI"),i=n("S4vA");t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*i((function(){n(1)})),"Object",a)}},"etR+":function(t,e,n){"use strict";n.r(e);var r=n("LYKQ"),o=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e.default=o.a},fUKC:function(t,e,n){n("ZY/g"),n("C5kU"),t.exports=n("sbOA")},fn8H:function(t,e,n){},gWtp:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"px-3"},[n("div",{staticClass:"d-flex align-items-center py-2"},[n("h3",{staticClass:"mb-0 text-capitalize"},[t._v("\n      "+t._s(t.collectionName)+"\n    ")]),t._v(" "),n("span",{staticClass:"mx-auto"}),t._v(" "),n("el-dropdown",{staticClass:"mr-4",attrs:{multiple:"","hide-on-click":!1}},[n("span",{staticClass:"el-dropdown-link"},[t._v("\n        Select columns\n        "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{staticStyle:{"max-height":"300px",overflow:"auto"},attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-checkbox-group",{on:{input:t.update},model:{value:t.selectedColumns,callback:function(e){t.selectedColumns=e},expression:"selectedColumns"}},t._l(t.allPossibleColumns,(function(e){return n("el-dropdown-item",{key:e,attrs:{label:e,value:e}},[n("el-checkbox",{staticClass:"mb-0 mr-4",attrs:{label:e,disabled:1===t.selectedColumns.length&&t.selectedColumns[0]===e}})],1)})))],1)],1),t._v(" "),n("el-checkbox",{staticClass:"mb-0 mr-4",model:{value:t.isFiltersVisible,callback:function(e){t.isFiltersVisible=e},expression:"isFiltersVisible"}},[t._v("\n      Show Filters\n    ")]),t._v(" "),n("el-pagination",{attrs:{"page-size":t.pageSize,total:t.count,"page-sizes":t.pageSizes,"current-page":t.page,layout:"sizes, prev, pager, next"},on:{"update:currentPage":function(e){t.page=e},"current-change":function(e){t.update()},"size-change":function(e){t.pageSize=e,t.update()}}})],1),t._v(" "),n("div",{staticClass:"mb-2",staticStyle:{width:"50%"}},[t._v("\n    Params\n    "),t._l(t.params,(function(e,r){return n("div",{key:r,staticClass:"d-flex align-items-center mb-1"},[n("el-checkbox",{staticClass:"mr-2",model:{value:e.isEnabled,callback:function(n){t.$set(e,"isEnabled",n)},expression:"parameter.isEnabled"}}),t._v(" "),n("el-input",{attrs:{placeholder:"key"},on:{input:function(e){t.handleParamKeyChange(r)}},model:{value:e.key,callback:function(n){t.$set(e,"key",n)},expression:"parameter.key"}}),t._v(" "),n("el-input",{staticClass:"ml-1",attrs:{placeholder:"value"},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"parameter.value"}}),t._v(" "),t.params.length>1?n("el-button",{attrs:{icon:"el-icon-close",circle:"",type:"text"},on:{click:function(e){t.removeParam(r)}}}):t._e()],1)})),t._v(" "),n("el-button",{staticClass:"btn btn-primary mb-3",on:{click:t.update}},[t._v("\n      Search\n    ")])],2),t._v(" "),n("el-table",{attrs:{data:t.tableRows,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"sort-change":t.handleSortChange}},t._l(t.selectedColumns,(function(e,r){return n("el-table-column",{key:e,attrs:{label:e,prop:e,align:"center",sortable:t.sortableFieldTypes.includes(t.getFieldType(e))?"custom":void 0},scopedSlots:t._u([{key:"default",fn:function(o){return[0===o.$index&&t.isFiltersVisible?n("div",{staticClass:"text-left"},[n("el-input",{attrs:{placeholder:"Search by "+e,type:"number"===t.getFieldType(e)?"number":"text"},on:{change:function(e){t.update()}},model:{value:t.searchFilters[e],callback:function(n){t.$set(t.searchFilters,e,n)},expression:"searchFilters[name]"}}),t._v(" "),n("el-checkbox",{staticClass:"mt-3",attrs:{disabled:"number"===t.getFieldType(e)},on:{change:function(e){t.update()}},model:{value:t.exactSearches[e],callback:function(n){t.$set(t.exactSearches,e,n)},expression:"exactSearches[name]"}},[t._v("\n            Exact match\n          ")])],1):[0===r&&"requestlog"!==t.collectionName?n("router-link",{attrs:{to:"/edit/"+t.collectionName+"/"+o.row._id}},[t._v("\n            "+t._s(t.getPath(o.row,e))+"\n          ")]):t._e(),t._v(" "),0===r&&"requestlog"===t.collectionName?n("router-link",{attrs:{to:"/dev/viewrequest/"+o.row._id}},[t._v("\n            "+t._s(t.getPath(o.row,e))+"\n          ")]):t._e(),t._v(" "),0!==r?n("span",[t._v(t._s(t.getPath(o.row,e)))]):t._e()]]}}])})}))),t._v(" "),n("div",{staticClass:"d-flex align-items-center my-3"},[t.showAddButton?n("router-link",{staticClass:"mr-2",attrs:{to:"/edit/"+t.collectionName+"/create"}},[n("button",{staticClass:"btn btn-primary"},[t._v("\n        Add\n      ")])]):t._e(),t._v(" "),n("button",{staticClass:"btn btn-secondary download-button mr-2",on:{click:function(e){t.downloadCSV()}}},[t._v("\n      Download\n    ")]),t._v(" "),n("button",{staticClass:"btn btn-secondary download-button",on:{click:function(e){t.downloadAllCSV()}}},[t._v("\n      Download All\n    ")]),t._v(" "),n("span",{staticClass:"mx-auto"}),t._v(" "),n("el-pagination",{attrs:{"page-size":t.pageSize,total:t.count,"page-sizes":t.pageSizes,"current-page":t.page,layout:"sizes, prev, pager, next"},on:{"update:currentPage":function(e){t.page=e},"current-change":function(e){t.update()},"size-change":function(e){t.pageSize=e,t.update()}}})],1)],1)},o=[]},iocF:function(t,e,n){var r=n("USwo");r(r.P+r.R,"Set",{toJSON:n("KtlF")("Set")})},jWXv:function(t,e,n){t.exports={default:n("r6fa"),__esModule:!0}},lcJ3:function(t,e,n){},r6fa:function(t,e,n){n("3+Ww"),n("C5kU"),n("ZY/g"),n("PfQu"),n("iocF"),n("Huux"),n("Li4W"),t.exports=n("VSTI").Set},rNHk:function(t,e,n){var r=n("nAx8"),o=n("n7vu"),i=n("CYMq"),a=n("0WpP"),s=n("+WSI");t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,f=6==t,d=5==t||f,p=e||s;return function(e,s,v){for(var h,m,g=i(e),b=o(g),y=r(s,v,3),_=a(b.length),w=0,x=n?p(e,_):u?p(e,0):void 0;_>w;w++)if((d||w in b)&&(m=y(h=b[w],w,g),t))if(n)x[w]=m;else if(m)switch(t){case 3:return!0;case 5:return h;case 6:return w;case 2:x.push(h)}else if(l)return!1;return f?-1:c||l?l:x}}},rdj4:function(t,e,n){"use strict";var r=n("GhSp").f,o=n("b08l"),i=n("iZ5/"),a=n("nAx8"),s=n("ukM9"),u=n("wlNh"),c=n("OTpG"),l=n("6jRP"),f=n("va3J"),d=n("C61u"),p=n("40oJ").fastKey,v=n("JAUQ"),h=d?"_s":"size",m=function(t,e){var n,r=p(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var l=t((function(t,r){s(t,l,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[h]=0,null!=r&&u(r,n,t[c],t)}));return i(l.prototype,{clear:function(){for(var t=v(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[h]=0},delete:function(t){var n=v(this,e),r=m(n,t);if(r){var o=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=o),o&&(o.p=i),n._f==r&&(n._f=o),n._l==r&&(n._l=i),n[h]--}return!!r},forEach:function(t){v(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!m(v(this,e),t)}}),d&&r(l.prototype,"size",{get:function(){return v(this,e)[h]}}),l},def:function(t,e,n){var r,o,i=m(t,e);return i?i.v=n:(t._l=i={i:o=p(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=i),r&&(r.n=i),t[h]++,"F"!==o&&(t._i[o]=i)),t},getEntry:m,setStrong:function(t,e,n){c(t,e,(function(t,n){this._t=v(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?l(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,l(1))}),n?"entries":"values",!n,!0),f(e)}}},sbOA:function(t,e,n){var r=n("d+lc"),o=n("I90/");t.exports=n("VSTI").getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},sw1Y:function(t,e,n){"use strict";n.r(e);var r=n("vRIL"),o=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e.default=o.a},"u1G+":function(t,e,n){"use strict";n.r(e);var r=n("Qxpe"),o=n("etR+");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("GxU+");var a=n("KHd+"),s=Object(a.a)(o.default,r.a,r.b,!1,null,"5d163182",null);s.options.__file="Home.vue",e.default=s.exports},vRIL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=h(n("FyfS")),o=h(n("jWXv")),i=h(n("rfXi")),a=h(n("14Xm")),s=h(n("D3Ub")),u=h(n("YEIV")),c=h(n("GQeE")),l=h(n("m1cH")),f=h(n("QbLZ")),d=h(n("t3Un")),p=h(n("Iab2")),v=h(n("boci"));function h(t){return t&&t.__esModule?t:{default:t}}var m=[25,50,100,500],g={order:null,prop:null};e.default={name:"ListDocuments",props:{collectionName:{type:String,default:"collection"},filter:{type:Object,default:function(){}},columns:{type:Array,default:function(){}},showAddButton:{type:Boolean,default:!0},showPaginateOnBottom:{type:Boolean,default:!0}},data:function(){return{page:1,count:0,data:[],schema:{},exactSearches:{},searchFilters:{},pageSizes:m,pageSize:m[0],isFiltersVisible:!0,sortableFieldTypes:["number","string","boolean"],orderBy:(0,f.default)({},g),selectedColumns:[],allPossibleColumns:[],params:[{key:"",value:"",isEnabled:!0}]}},computed:{isEndpointsPage:function(){return"Endpoints"===this.$options.name},tableRows:function(){return this.isFiltersVisible?[{}].concat((0,l.default)(this.data)):this.data},appliedSearchFilters:function(){var t=this;return(0,c.default)(this.searchFilters).reduce((function(e,n){var r=t.searchFilters[n],o=t.getFieldType(n);if(!r||"custom"===o)return e;var i=t.getQueryBuilder(o);return(0,f.default)({},e,(0,u.default)({},n,i({fieldName:n,searchKeyword:r})))}),{})},allFilters:function(){var t=this.isEndpointsPage?void 0:'{"meta.created":-1}';this.orderBy.prop&&this.orderBy.order&&(t='{"'+this.orderBy.prop+'": '+("descending"===this.orderBy.order?"-1":"1")+"}");var e=(0,f.default)({orderby:t,page:this.page,limit:this.pageSize},this.filter,{query:(0,f.default)({},this.appliedSearchFilters)}),n=this.selectedColumns;return n&&(e.fields=n.reduce((function(t,e){return t[e]=1,t}),{})),e},customParams:function(){return this.params.filter((function(t){return t.isEnabled&&t.key})).map((function(t){return t.key+"="+(t.value||"")})).join("&")||""}},watch:{collectionName:{handler:"update"},"$route.params.collectionName":{handler:"resetTable"}},mounted:function(){this.update()},methods:{getPath:function(t,e,n){var r=String.prototype.split.call(e,/[,[\].]+?/).filter(Boolean).reduce((function(t,e){return null!=t?t[e]:t}),t);return void 0===r||r===t?n:r},handleSortChange:function(t){this.orderBy=t,this.update()},update:function(){var t=this;return(0,s.default)(a.default.mark((function e(){var n,r,o,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$route.params.collectionName&&(t.collectionName=t.$route.params.collectionName),t.collection&&t.collection._id===t.collectionName){e.next=6;break}return e.next=4,(0,d.default)({url:"/collection/"+t.collectionName});case 4:t.collection=e.sent.data,t.schema=t.collection.schema;case 6:return t.selectedColumns.length||(n=t.columns||t.collection.admin&&t.collection.admin.columns,t.allPossibleColumns=t.getAllPossibleColumns(),t.selectedColumns=n||(0,c.default)(t.schema.properties)),r=(0,f.default)({},t.allFilters),o=t.customParams?"/"+t.collectionName+"/?"+t.customParams:"/"+t.collectionName,e.next=11,(0,d.default)({url:o,params:r});case 11:i=e.sent.data,t.count=i.itemsTotal,t.data=t.applyCustomColumnFilter(i.data);case 14:case"end":return e.stop()}}),e,t)})))()},getAllPossibleColumns:function(){var t=this.collection.admin&&this.collection.admin.columns||[],e=this.getSchemaProperties(this.schema);return(0,i.default)(new o.default(t.concat(e).sort()))},getSchemaProperties:function(t,e){var n=this,r=[],o=t.properties;return(0,c.default)(o).forEach((function(t){var i=(e?e+".":"")+t;o[t].properties&&(0,c.default)(o[t].properties).length?r=r.concat(n.getSchemaProperties(o[t],i)):r.push(i)})),r},getSchemaProperty:function(t,e){var n=e.split("."),o=t,i=!0,a=!1,s=void 0;try{for(var u,c=(0,r.default)(n);!(i=(u=c.next()).done);i=!0){var l=u.value;if(!o.properties||!o.properties[l])return;o=o.properties[l]}}catch(t){a=!0,s=t}finally{try{!i&&c.return&&c.return()}finally{if(a)throw s}}return o},applyCustomColumnFilter:function(t){var e=this,n=(0,c.default)(this.searchFilters).filter((function(t){return"custom"===e.getFieldType(t)}));return t.filter((function(t){return n.every((function(n){var r=e.searchFilters[n];if(!r)return!0;var o=String(v.default.get(t,n)||"");return e.exactSearches[n]?o===r:o.toLowerCase().includes(r.toLowerCase())}))}))},downloadCSV:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data,n=this.collectionName,r=this.selectedColumns.map((function(t){return'"'+t+'"'})).join(",")+"\n";if(e){r+=e.map((function(e){return t.selectedColumns.map((function(t){return'"'+String(v.default.get(e,t)||"").replace(/"/g,'""')+'"'}))})).join("\n"),console.log(r);var o=new Blob([r],{type:"text/plain;charset=utf-8"});(0,p.default)(o,n+".csv")}},downloadAllCSV:function(){var t=this;return(0,s.default)(a.default.mark((function e(){var n,r,o,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=1;case 2:if(!(t.count>n.length)){e.next=11;break}return o=(0,f.default)({},t.allFilters,{page:r,limit:500}),e.next=6,(0,d.default)({url:"/"+t.collectionName+"/"+t.customParams,params:o});case 6:i=e.sent.data,n=[].concat((0,l.default)(i.data),(0,l.default)(n)),r+=1,e.next=2;break;case 11:t.downloadCSV(t.applyCustomColumnFilter(n));case 12:case"end":return e.stop()}}),e,t)})))()},getFieldType:function(t){var e=this.getSchemaProperty(this.schema,t);return e&&e.type||"custom"},getQueryBuilder:function(t){return{string:this.getStringSearchQuery,number:function(t){return parseInt(t.searchKeyword)}}[t]||this.getStringSearchQuery},getStringSearchQuery:function(t){var e=t.fieldName,n=t.searchKeyword,r={$regex:n,$options:"i"};return this.exactSearches[e]?n:r},resetTable:function(){this.resetFilters(),this.resetPagination(),this.data=[],this.count=0},resetFilters:function(){this.exactSearches={},this.searchFilters={},this.selectedColumns=[],this.allPossibleColumns=[]},resetPagination:function(){this.page=1,this.pageSize=m[0],this.orderBy=g},handleParamKeyChange:function(t){var e=this.params[t].key;t===this.params.length-1&&e&&this.params.push({key:"",value:"",isEnabled:!0})},removeParam:function(t){this.params.splice(t,1)}}}},wYM1:function(t,e,n){var r=n("USwo");r(r.S+r.F*!n("C61u"),"Object",{defineProperty:n("GhSp").f})}}]);